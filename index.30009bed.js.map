{"mappings":"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","sources":["src/js/fav/constants.js","src/js/withoutNews.js","src/js/fav/common.js","src/js/fav/mainHome.js"],"sourcesContent":["export { FAV_PAGES_KEY, OFFSETS_FAVORITES, MAX_WIDTH, NEWS_CARD_CSS_CLASSES, WEATHER_CARD_CSS_CLASS, READ_PAGE_NEWS_CARDS_CONTAINER, FAV_BUTTON_ICON_FILL_COLOR, FAV_BUTTON_ICON_FILLED_HTML, FAV_BUTTON_ICON_EMPTY_HTML };\n\n\nconst FAV_PAGES_KEY = 'favPagesData';\nconst WEATHER_CARD_CSS_CLASS = 'weather__card';\nconst READ_PAGE_NEWS_CARDS_CONTAINER = 'read';\nconst FAV_BUTTON_ICON_FILL_COLOR = '#4440F6';\n\n\nconst OFFSETS_FAVORITES = {\n    mobile: 5,\n    tablet: 8,\n    desktop: 9,\n};\nObject.freeze(OFFSETS_FAVORITES);\n\n\nconst MAX_WIDTH = {\n    mobile: 320,\n    tablet: 768,\n};\nObject.freeze(MAX_WIDTH);\n\n\nconst NEWS_CARD_CSS_CLASSES = {\n    container: 'news-container',\n    card: 'news-item',\n    favButton: 'add-news-favorite',\n    favButtonText: 'favorite-btn-text',\n    favButtonIcon: 'favorite-icon',\n    \n    inFavorites: 'in-favorites',\n\n    title: 'news-title',\n    abstract: 'news-desk',\n    section: 'news-chip',\n    media: 'news-img',\n    published_date: 'news-date',\n    url: 'news-link',\n};\nObject.freeze(NEWS_CARD_CSS_CLASSES);\n\n\nconst FAV_BUTTON_ICON_FILLED_HTML = '<path class=\"icon-heart\" d=\"M8.381 2.286C4.174 2.286.762 5.663.762 9.829c0 3.363 1.333 11.345 14.458 19.413a1.501 1.501 0 0 0 1.56 0c13.125-8.069 14.458-16.05 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543S16 6.857 16 6.857s-3.412-4.571-7.619-4.571z\"/>';\nconst FAV_BUTTON_ICON_EMPTY_HTML = '<path class=\"icon-empty-heart\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.333 4c-3.681 0-6.667 2.955-6.667 6.6 0 2.943 1.167 9.927 12.651 16.987a1.316 1.316 0 0 0 1.366 0c11.484-7.06 12.651-14.044 12.651-16.987 0-3.645-2.985-6.6-6.667-6.6S16 8 16 8s-2.985-4-6.667-4z\" />';","export function withoutNews() {\n  if (String(document.querySelector('.not-found-image')) !== 'null') {\n    return;\n  }\n  function createGag() {\n    return `<h2 class=\"not-found\">We havenâ€™t found any news</h2>\n    <img class=\"not-found-image\" srcset=\"\n                  https://raw.githubusercontent.com/MaxF1996/NYTimesNews/main/src/images/gap1x.png          601w,\n                  https://raw.githubusercontent.com/MaxF1996/NYTimesNews/main/src/images/gap1x-tablet.png   560w,\n                  https://raw.githubusercontent.com/MaxF1996/NYTimesNews/main/src/images/gap1x-mobile.png   248w,\n                  https://raw.githubusercontent.com/MaxF1996/NYTimesNews/main/src/images/gap2x.png          1202w,\n                  https://raw.githubusercontent.com/MaxF1996/NYTimesNews/main/src/images/gap2x-tablet.png   1120w,\n                  https://raw.githubusercontent.com/MaxF1996/NYTimesNews/main/src/images/gap2x-mobile.png   496w,\n                  https://raw.githubusercontent.com/MaxF1996/NYTimesNews/main/src/images/gap3x.png          1803w,\n                  https://raw.githubusercontent.com/MaxF1996/NYTimesNews/main/src/images/gap3x-tablet.png     1680w,\n                  https://raw.githubusercontent.com/MaxF1996/NYTimesNews/main/src/images/gap3x-mobile.png   744w,\n                \" sizes=\"(min-width: 1280px) 601px, (min-width: 768px) 560px, 248px\" src=\"./images/gap1x.png\" alt=\"Not found\">`;\n  }\n  const field = document.querySelector('.main');\n  if (document.querySelectorAll('.news-item').length < 1) {\n    if (document.title === 'NYTimes News: Your Favorites') {\n      document.querySelector('.news-container').remove();\n    } else if (document.title === 'NYTimes News: Read By Yourself') {\n      document.querySelector('.read').remove();\n    }\n\n    field.insertAdjacentHTML('beforeend', createGag());\n  }\n}\n","export { touchLocalStorageArr, getPagesOffset, newsCardsFavChecker, resolveFavClick };\nimport {\n  FAV_BUTTON_ICON_EMPTY_HTML,\n  FAV_BUTTON_ICON_FILLED_HTML,\n  FAV_BUTTON_ICON_FILL_COLOR,\n  FAV_PAGES_KEY,\n  MAX_WIDTH,\n  NEWS_CARD_CSS_CLASSES,\n  WEATHER_CARD_CSS_CLASS,\n} from './constants';\nimport { withoutNews } from '../withoutNews';\n\nfunction getPagesOffset(offsetsStruct) {\n  if (window.matchMedia(`(max-width: ${MAX_WIDTH.mobile}px)`).matches) {\n    return offsetsStruct.mobile;\n  } else if (window.matchMedia(`(max-width: ${MAX_WIDTH.tablet}px)`).matches) {\n    return offsetsStruct.tablet;\n  } else {\n    return offsetsStruct.desktop;\n  }\n}\n\n// The function return data (array) from localStorage and can make changes with it using 'operatingFunc(array, data)' function\nfunction touchLocalStorageArr(key, incomingData = null, operatingFunc = null) {\n  let dataArr = [];\n  const storedData = localStorage.getItem(key);\n  if (storedData) {\n    try {\n      dataArr = JSON.parse(storedData);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  if (operatingFunc) {\n    operatingFunc(dataArr, incomingData);\n    localStorage.setItem(key, JSON.stringify(dataArr));\n  }\n  return dataArr;\n}\n\n// It finds a news card that corresponds to an event ('click') target.\nfunction getNewsCardNode(newsCardClassName, favButtonNode) {\n  let newsCardNode = favButtonNode;\n  while (!newsCardNode.classList.contains(newsCardClassName)) {\n    newsCardNode = newsCardNode.parentElement;\n  }\n  return newsCardNode;\n}\n\n// Checks for a news card in the storage\nfunction isInStorage(localStorageKey, newsCardNode) {\n  const title = newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.title}`).textContent.trim();\n  const idx = touchLocalStorageArr(localStorageKey).findIndex(struct => struct.title === title);\n  return idx;\n}\n\nfunction removeCardFromFavorites(localStorageKey, idx, newsCardNode) {\n  touchLocalStorageArr(localStorageKey, idx, removeFromArr);\n  newsCardNode.remove();\n  withoutNews();\n\n  // newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.favButtonText}`).textContent = 'Add to favorite';\n  // newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.favButtonIcon}`).innerHTML = FAV_BUTTON_ICON_EMPTY_HTML;\n}\nfunction removeFromArr(storageArr, idx) {\n  storageArr.splice(idx, 1);\n}\n\nfunction addCardToFavorites(localStorageKey, newsCardNode) {\n  touchLocalStorageArr(localStorageKey, newsCardNode, addToArr);\n  markCardFavorite(newsCardNode);\n}\nfunction addToArr(storageArr, newsCardNode) {\n  storageArr.unshift(collectData(newsCardNode));\n}\n\nfunction markCardFavorite(newsCardNode) {\n  newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.favButtonText}`).textContent = 'In favorite';\n  newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.favButtonIcon}`).innerHTML =\n    FAV_BUTTON_ICON_FILLED_HTML;\n}\n\nfunction collectData(newsCardNode) {\n  const dataStruct = {\n    media: [\n      {\n        url: newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.media}`).src,\n        caption: newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.media}`).alt,\n      },\n    ],\n    title: newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.title}`).textContent.trim(),\n    section: newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.section}`).textContent,\n    subsection: '',\n    abstract: newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.abstract}`).textContent,\n    published_date: newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.published_date}`)\n      .textContent,\n    url: newsCardNode.querySelector(`.${NEWS_CARD_CSS_CLASSES.url}`).href,\n  };\n  return dataStruct;\n}\n\nfunction resolveFavClick(event) {\n  if (\n    !(\n      event.target.classList.contains(NEWS_CARD_CSS_CLASSES.favButton) ||\n      event.target.parentNode.classList.contains(NEWS_CARD_CSS_CLASSES.favButton) ||\n      event.target.tagName === 'path'\n    )\n  ) {\n    return;\n  }\n\n  const newsCardNode = getNewsCardNode(NEWS_CARD_CSS_CLASSES.card, event.target);\n\n  const idx = isInStorage(FAV_PAGES_KEY, newsCardNode);\n  idx > -1\n    ? removeCardFromFavorites(FAV_PAGES_KEY, idx, newsCardNode)\n    : addCardToFavorites(FAV_PAGES_KEY, newsCardNode);\n}\n\nfunction newsCardsFavChecker() {\n  const cards = document.querySelectorAll(`.${NEWS_CARD_CSS_CLASSES.card}`);\n  for (let card of cards) {\n    if (card.classList.contains(WEATHER_CARD_CSS_CLASS)) {\n      continue;\n    }\n    if (isInStorage(FAV_PAGES_KEY, card) > -1) {\n      markCardFavorite(card);\n    }\n  }\n}\n","import { NEWS_CARD_CSS_CLASSES } from \"./constants\";\nimport { resolveFavClick } from \"./common\";\n\nconst newsCardsContainer = document.querySelector(`.${NEWS_CARD_CSS_CLASSES.container}`);\nnewsCardsContainer.addEventListener('click', resolveFavClick);"],"names":["$8b4cce4c4083b238$export$c06779d5a2652ef1","Object","freeze","mobile","tablet","desktop","$8b4cce4c4083b238$export$157e21b1e4c118d6","$8b4cce4c4083b238$export$58ddb6401142758f","container","card","favButton","favButtonText","favButtonIcon","inFavorites","title","abstract","section","media","published_date","url","$1c13f1dfab88acae$export$67145c0690fba339","String","document","querySelector","field","querySelectorAll","length","remove","insertAdjacentHTML","$8e922cfb642864d2$export$1620fbff1aadac46","key","incomingData","arguments","operatingFunc","dataArr","storedData","localStorage","getItem","JSON","parse","error","console","log","message","setItem","stringify","$8e922cfb642864d2$var$isInStorage","localStorageKey","newsCardNode","concat","textContent","trim","findIndex","struct","$8e922cfb642864d2$var$removeCardFromFavorites","idx","$8e922cfb642864d2$var$removeFromArr","storageArr","splice","$8e922cfb642864d2$var$addToArr","unshift","src","caption","alt","subsection","href","$8e922cfb642864d2$var$collectData","$8e922cfb642864d2$var$markCardFavorite","innerHTML","addEventListener","event","target","classList","contains","parentNode","tagName","newsCardClassName","favButtonNode","parentElement","$8e922cfb642864d2$var$getNewsCardNode","$8e922cfb642864d2$var$addCardToFavorites"],"version":3,"file":"index.30009bed.js.map"}